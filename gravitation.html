<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Extreme Physics: Gravitation Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        canvas { background: radial-gradient(circle, #020617 0%, #000 100%); border-radius: 1.5rem; }
        .formula { font-family: 'Times New Roman', serif; font-style: italic; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen p-8 text-slate-900">
    <div class="max-w-7xl mx-auto">
        <header class="mb-8 flex justify-between items-center bg-white p-6 rounded-3xl shadow-xl">
            <div>
                <h1 class="text-4xl font-black text-slate-800 italic uppercase">Gravitatonal Force </h1>
                <p class="text-blue-600 font-bold uppercase tracking-widest text-xs">Acceleration due to gravity | Satellite & its Orbit</p>
            </div>
            <div class="flex gap-3">
                <button onclick="setMode(1)" id="btn1" class="px-6 py-3 rounded-2xl font-black transition bg-blue-600 text-white shadow-lg">1. FAST APPLE</button>
                <button onclick="setMode(2)" id="btn2" class="px-6 py-3 rounded-2xl font-black transition bg-slate-100 text-slate-600">2. SLOW SATELLITE</button>
                <button onclick="setMode(3)" id="btn3" class="px-6 py-3 rounded-2xl font-black transition bg-slate-100 text-slate-600">3. SLOW GEO-STATIONARY</button>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-white p-6 rounded-3xl shadow-xl border-b-4 border-blue-500">
                    <div id="controls" class="space-y-6"></div>
                    <div class="mt-8 flex gap-3">
                        <button onclick="isRunning = true" class="flex-1 py-4 bg-emerald-500 text-white rounded-2xl font-black hover:scale-105 transition">START</button>
                        <button onclick="resetSim()" class="flex-1 py-4 bg-slate-800 text-white rounded-2xl font-black hover:scale-105 transition">RESET</button>
                    </div>
                </div>

                <div id="math-steps" class="bg-white p-6 rounded-3xl shadow-xl font-mono text-[13px] leading-relaxed overflow-y-auto max-h-[400px]"></div>
            </div>

            <div class="lg:col-span-8 flex flex-col gap-6">
                <div class="relative">
                    <canvas id="canvas" width="800" height="600" class="w-full shadow-2xl border-4 border-white"></canvas>
                    <div id="telemetry" class="absolute top-8 left-8 bg-black/80 p-6 rounded-2xl text-white font-mono text-xs border border-white/20"></div>
                </div>
                <div id="remarks" class="bg-blue-900 text-blue-50 p-6 rounded-3xl shadow-2xl border-l-8 border-blue-400"></div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const RE = 6371000; const g0 = 9.81; const GM = g0 * RE * RE;

        let mode = 1, isRunning = false;
        let appleY = 0, appleV = 0, angle = -Math.PI/2, earthAngle = 0;

        function setMode(m) {
            mode = m; isRunning = false; resetSim();
            for(let i=1; i<=3; i++) document.getElementById(`btn${i}`).className = i === m ? "px-6 py-3 rounded-2xl font-black bg-blue-600 text-white shadow-lg" : "px-6 py-3 rounded-2xl font-black bg-slate-100 text-slate-600";
            renderUI();
        }

        function renderUI() {
            const controls = document.getElementById('controls');
            const math = document.getElementById('math-steps');
            const remarks = document.getElementById('remarks');

            if (mode === 1) {
                controls.innerHTML = `<label class="block text-xs font-black text-slate-400 mb-2 uppercase">Drop Radius:</label><input type="range" id="sliderR" min="1.0" max="2.0" step="0.01" value="1.50" class="w-full h-3 bg-blue-100 rounded-lg appearance-none cursor-pointer" oninput="updateMath()"><div class="text-blue-600 font-black mt-2" id="rVal">1.50 RE</div>`;
                remarks.innerHTML = `<h3 class="font-black text-xl mb-2 text-blue-300">Acceleration due to gravity = 9.81 m/s-2 ?</h3><p>Acceleation is inversely proportional to r^2 </p>`;
            } else if (mode === 2) {
                controls.innerHTML = `<label class="block text-xs font-black text-slate-400 mb-2 uppercase">Orbit Radius:</label><input type="range" id="sliderR" min="1.1" max="5.0" step="0.1" value="2.0" class="w-full h-3 bg-emerald-100 rounded-lg appearance-none cursor-pointer" oninput="updateMath()"><div class="text-emerald-600 font-black mt-2" id="rVal">2.00 RE</div>`;
                remarks.innerHTML = `<h3 class="font-black text-xl mb-2 text-emerald-300">Don't forget to find out T^2 is directly proportional to r^3</h3><p>GMm / r^2 = m r w^2  <i></i> and use w = 2 Pi / T.</p>`;
            } else {
                controls.innerHTML = `<div class="p-4 bg-amber-100 rounded-2xl border-2 border-amber-300 text-amber-900 font-black text-center">GEO-STATIONARY: T = 24h</div>`;
                remarks.innerHTML = `<h3 class="font-black text-xl mb-2 text-amber-300">THE GEO-SYNC CONDITIONS</h3><ul class="list-disc ml-4 font-bold"><li>Period <b>T = 24h</b></li><li>Motion: <b>From West to East, same sense of rotation as the Earth </b></li><li>Radius: <b>Fixed at 6.61 RE</b></li><li>Location: <b>Directly above Equator</b></li></ul>`;
            }
            updateMath();
        }

        function updateMath() {
            const math = document.getElementById('math-steps');
            const r_units = mode === 3 ? 6.61 : parseFloat(document.getElementById('sliderR')?.value || 1.5);
            if(document.getElementById('rVal')) document.getElementById('rVal').innerText = r_units.toFixed(2) + " RE";
            
            const r_m = r_units * RE;
            const current_g = GM / (r_m * r_m);

            if (mode === 1) {
                math.innerHTML = `<b class="text-blue-600">NEWTONIAN DROP</b><br>r = ${r_units} RE<br>g = GM / r²<br>Sub GM = g₀RE²:<br>g = (9.81 * RE²) / (${r_units}RE)²<br><b class="text-lg text-blue-900">a = ${current_g.toFixed(3)} m/s²</b>`;
            } else if (mode === 2) {
                const v = Math.sqrt(GM / r_m);
                math.innerHTML = `<b class="text-emerald-600">ORBITAL SPEED</b><br>v = sqrt(GM / r)<br>v = sqrt(g₀RE² / r)<br><b class="text-lg text-emerald-900">v = ${(v/1000).toFixed(2)} km/s</b><br><br>T = 2πr / v<br>T = <b>${((2*Math.PI*r_m/v)/3600).toFixed(2)} hours</b>`;
            } else {
                math.innerHTML = `<b class="text-amber-600">GEO-RADIUS DERIVATION</b><br>T = 86400 s<br>r³ = (GM * T²) / (4π²)<br>r³ = (9.81 * RE² * 86400²) / (39.48)<br><b class="text-lg text-amber-900">r = 6.61 RE</b>`;
            }
        }

        function resetSim() { appleY = 0; appleV = 0; angle = -Math.PI/2; earthAngle = 0; isRunning = false; updateMath(); }

        function loop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const cx = canvas.width / 2, cy = canvas.height / 2;
            const r_units = mode === 3 ? 6.61 : parseFloat(document.getElementById('sliderR')?.value || 1.5);
            let scale = mode === 3 ? 35 : (mode === 2 ? 70 : 160);

            // Draw Earth
            ctx.save();
            ctx.translate(cx, cy);
            if(isRunning && mode > 1) earthAngle += 0.0005; // SLOW EARTH
            ctx.rotate(-earthAngle); 
            ctx.beginPath(); ctx.arc(0, 0, scale, 0, Math.PI*2);
            ctx.fillStyle = '#2563eb'; ctx.fill();
            ctx.strokeStyle = 'white'; ctx.setLineDash([5, 5]);
            ctx.beginPath(); ctx.moveTo(-scale, 0); ctx.lineTo(scale, 0); ctx.stroke();
            ctx.restore();

            if (mode === 1) {
                // PHYSICS SUB-STEPPING FOR HIGH SPEED
                const r_start = r_units * RE;
                const g_now = GM / Math.pow(r_start - appleY, 2);
                if (isRunning && (r_start - appleY) > RE) {
                    for(let i=0; i<80; i++) { // 80 steps per frame = VERY FAST
                        const temp_g = GM / Math.pow(r_start - appleY, 2);
                        appleV += temp_g * 0.01;
                        appleY += appleV * 0.01;
                    }
                }
                let current_r = Math.max(RE, r_start - appleY);
                ctx.beginPath(); ctx.arc(cx, cy - (current_r/RE)*scale, 10, 0, Math.PI*2);
                ctx.fillStyle = '#ef4444'; ctx.fill();
                updateTelemetry(current_r, appleV, GM/(current_r*current_r));
            } else {
                // VERY SLOW ORBIT
                const r_m = r_units * RE;
                const v = Math.sqrt(GM / r_m);
                const omega = v / r_m;
                if (isRunning) angle -= (omega * 50); // Heavily reduced multiplier for slow motion

                const r_px = r_units * scale;
                const sx = cx + Math.cos(angle) * r_px;
                const sy = cy + Math.sin(angle) * r_px;
                
                ctx.beginPath(); ctx.arc(cx, cy, r_px, 0, Math.PI*2);
                ctx.strokeStyle = 'rgba(255,255,255,0.1)'; ctx.stroke();
                
                // Tangent Vector
                ctx.beginPath(); ctx.moveTo(sx, sy);
                ctx.lineTo(sx + Math.sin(angle)*50, sy - Math.cos(angle)*50);
                ctx.strokeStyle = '#4ade80'; ctx.lineWidth = 3; ctx.stroke();

                ctx.beginPath(); ctx.arc(sx, sy, 6, 0, Math.PI*2);
                ctx.fillStyle = '#fbbf24'; ctx.fill();
                updateTelemetry(r_m, v, GM/(r_m*r_m));
            }
            requestAnimationFrame(loop);
        }

        function updateTelemetry(r, v, g) {
            document.getElementById('telemetry').innerHTML = `
                <div class="space-y-1">
                    <p><span class="opacity-50">DISTANCE:</span> ${(r/1000).toFixed(0)} km</p>
                    <p><span class="opacity-50">VELOCITY:</span> ${(v/1000).toFixed(2)} km/s</p>
                    <p><span class="opacity-50">GRAVITY:</span> ${g.toFixed(3)} m/s²</p>
                    ${mode>1 ? `<p><span class="text-amber-400">T: 24.00h</span></p>` : ''}
                </div>`;
        }
        setMode(1); loop();
    </script>
</body>
</html>